# Bond Market On Actions
# This file contains hooks that trigger the monthly bond trust updates

# Monthly pulse for bond trust system
on_monthly_pulse_country = {
	on_actions = {
		delay = { days = { 1 15 } }
		bond_market_monthly_pulse
    bond_market_defaulting_monthly_pulse
	}
}

# Bond market monthly pulse logic
bond_market_monthly_pulse = {
	events = {
		bond_market_events.1  # Trigger trust update event for every country
	}

	# Combined bond market random events
	random_events = {
		60 = 0  # 
		25 = bond_market_events.2  # 25% chance of income bonus (medium+ trust)
		10 = bond_market_events.4   # 8% chance of union unrest (trust > 70)
		5 = bond_market_events.3   # 5% chance of capitalist unrest (trust < 50)
		10 = bond_market_events.5   # 3% chance of industrialist loyalty (trust >= 30)
	}
}

# Bond defaulting events pulse
bond_market_defaulting_monthly_pulse = {
	# Combined bond market random events
    random_events = {
        60 = 0  #
        5 = bond_market_events.20 # Industrialists demands a bailout
        # A show of generosity and patriotism by the shopkeepers
        # Pillage trade routes
        # Jubilee
        # Nationalize everything
        # Revolution!!!
}

# Yearly pulse for bond rating grade changes
on_yearly_pulse_country = {
	events = {
		bond_market_events.13 # AAA rating (95-100)
		bond_market_events.14 # AA rating (85-94)
		bond_market_events.15 # A rating (75-84)
		bond_market_events.16 # B rating (65-74)
		bond_market_events.17 # C rating (50-64)
		bond_market_events.18 # D rating (25-49)
		bond_market_events.19 # F rating (0-24)
	}
}
